---
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: kubesec-webhook
  labels:
    app: kubesec-webhook
    kind: validator
webhooks:
- admissionReviewVersions:
  # NOTE(ludo): admission v1 requires github.com/slok/kubewebhook/v2
  #- v1
  - v1beta1
  clientConfig:
    service:
      name: kubesec-webhook
      namespace: kubesec
      path: "/deployment"
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURHVENDQWdHZ0F3SUJBZ0lVSnZSUVpMSUJncjVYYTRPb1J0NmN2T2dDbWZRd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0pqRWtNQ0lHQTFVRUF3d2JhM1ZpWlhObFl5MTNaV0pvYjI5ckxtdDFZbVZ6WldNdWMzWmpNQjRYRFRJeQpNVEV4TmpFME1qTXdPVm9YRFRJek1URXhOakUwTWpNd09Wb3dKakVrTUNJR0ExVUVBd3diYTNWaVpYTmxZeTEzClpXSm9iMjlyTG10MVltVnpaV011YzNaak1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0MKQVFFQTQ2L0xjMEFiREMzejdhTFFySE9CZjI1UzdzUVArRnFOUFpYNFBjdWZnd0g4ZDhKY2l0bVZpd2VHOXp2VApQM1MrZ0s3TnNVdXZ1bGNEY3Zndm5EZVF6dkhYZmd0V09ZQVRlSlU2ZkJTNXBscDMxK2wwcG5uYnZ0UFlla2J2CmU2cW1sME9ybWppcm13UVZkWXIrWWxwWWJOSmJmNHh5a0FRTEhEczRGSVlHQXRIV0hpNU0rZFJwTGFWallrbG4KclVMak1GdW80eXdkWGhpNGd2V1lhSlcyRE01ZGxuVzdXZzFRR2huZ1paZ2ZEQW1OT0NhYnM2WEFnalhxUVVQMgp0UlZHck94T0hPZTFFREdjYkY5MDk0dmYrR3E2d0pqU1lpRXBBckwyRlBYeFNjTm0wYVdRNzZqd0Vna2JQaWtSCnhXVXRmbXBIYlIrUnFSSm8xckJqREZaZSt3SURBUUFCb3o4d1BUQW1CZ05WSFJFRUh6QWRnaHRyZFdKbGMyVmoKTFhkbFltaHZiMnN1YTNWaVpYTmxZeTV6ZG1Nd0V3WURWUjBsQkF3d0NnWUlLd1lCQlFVSEF3RXdEUVlKS29aSQpodmNOQVFFTEJRQURnZ0VCQU1pclNEb2FDeUVWYk5UZE9FRW0rVEFadEF4bGlBR1FBaUhDUU5QT0o5WDgwTTVKCkJ6MDBLUDkvaWN3SHcrdEg1aU1MRDk2ZDh1aFZFbllGN2l6NUpYYkZFTnlyY3EvYUJiRWFlVWxSMFltMlpSMEQKL1pHMUtLU3E3WmJrclJRQTAwb2FaLzJBeUdCbWdleklRNk0yU3F5TmRoR1VVdngxVVBYbTlxN1AvWGJQZU1HRApiVFd5alhmc1NlelY0MFFGZFArL09JN3h3WmFVd0lGYWU4S3p5TjdkL1I3byt1WTdzbFE3L3pvWVdmbHpod0VvCnJtYnBVUmJ4SGQwaTNzYndlbWlqc1ZZbDQzYko3MWdvQUhVSlkzNGdEeis2eVRMdU5zaFVsV1haZUhoRzgrSjYKNzhpb01WcTdDU3F4a3lVM0VZc09ydmxCeTdOeHlsYTM3NDZYSWhrPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  failurePolicy: Fail
  name: deployment.admission.kubesec.io
  namespaceSelector:
    matchLabels:
      kubesec-validation: enabled
  rules:
    - operations:
      - CREATE
      - UPDATE
      apiGroups:
      - apps
      - extensions
      apiVersions:
      - "*"
      resources:
      - deployments
  sideEffects: None
- admissionReviewVersions:
  # NOTE(ludo): admission v1 requires github.com/slok/kubewebhook/v2
  #- v1
  - v1beta1
  clientConfig:
    service:
      name: kubesec-webhook
      namespace: kubesec
      path: "/daemonset"
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURHVENDQWdHZ0F3SUJBZ0lVSnZSUVpMSUJncjVYYTRPb1J0NmN2T2dDbWZRd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0pqRWtNQ0lHQTFVRUF3d2JhM1ZpWlhObFl5MTNaV0pvYjI5ckxtdDFZbVZ6WldNdWMzWmpNQjRYRFRJeQpNVEV4TmpFME1qTXdPVm9YRFRJek1URXhOakUwTWpNd09Wb3dKakVrTUNJR0ExVUVBd3diYTNWaVpYTmxZeTEzClpXSm9iMjlyTG10MVltVnpaV011YzNaak1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0MKQVFFQTQ2L0xjMEFiREMzejdhTFFySE9CZjI1UzdzUVArRnFOUFpYNFBjdWZnd0g4ZDhKY2l0bVZpd2VHOXp2VApQM1MrZ0s3TnNVdXZ1bGNEY3Zndm5EZVF6dkhYZmd0V09ZQVRlSlU2ZkJTNXBscDMxK2wwcG5uYnZ0UFlla2J2CmU2cW1sME9ybWppcm13UVZkWXIrWWxwWWJOSmJmNHh5a0FRTEhEczRGSVlHQXRIV0hpNU0rZFJwTGFWallrbG4KclVMak1GdW80eXdkWGhpNGd2V1lhSlcyRE01ZGxuVzdXZzFRR2huZ1paZ2ZEQW1OT0NhYnM2WEFnalhxUVVQMgp0UlZHck94T0hPZTFFREdjYkY5MDk0dmYrR3E2d0pqU1lpRXBBckwyRlBYeFNjTm0wYVdRNzZqd0Vna2JQaWtSCnhXVXRmbXBIYlIrUnFSSm8xckJqREZaZSt3SURBUUFCb3o4d1BUQW1CZ05WSFJFRUh6QWRnaHRyZFdKbGMyVmoKTFhkbFltaHZiMnN1YTNWaVpYTmxZeTV6ZG1Nd0V3WURWUjBsQkF3d0NnWUlLd1lCQlFVSEF3RXdEUVlKS29aSQpodmNOQVFFTEJRQURnZ0VCQU1pclNEb2FDeUVWYk5UZE9FRW0rVEFadEF4bGlBR1FBaUhDUU5QT0o5WDgwTTVKCkJ6MDBLUDkvaWN3SHcrdEg1aU1MRDk2ZDh1aFZFbllGN2l6NUpYYkZFTnlyY3EvYUJiRWFlVWxSMFltMlpSMEQKL1pHMUtLU3E3WmJrclJRQTAwb2FaLzJBeUdCbWdleklRNk0yU3F5TmRoR1VVdngxVVBYbTlxN1AvWGJQZU1HRApiVFd5alhmc1NlelY0MFFGZFArL09JN3h3WmFVd0lGYWU4S3p5TjdkL1I3byt1WTdzbFE3L3pvWVdmbHpod0VvCnJtYnBVUmJ4SGQwaTNzYndlbWlqc1ZZbDQzYko3MWdvQUhVSlkzNGdEeis2eVRMdU5zaFVsV1haZUhoRzgrSjYKNzhpb01WcTdDU3F4a3lVM0VZc09ydmxCeTdOeHlsYTM3NDZYSWhrPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  failurePolicy: Fail
  namespaceSelector:
    matchLabels:
      kubesec-validation: enabled
  name: daemonset.admission.kubesec.io
  rules:
    - operations:
      - CREATE
      - UPDATE
      apiGroups:
      - apps
      - extensions
      apiVersions:
      - "*"
      resources:
      - daemonsets
  sideEffects: None
- admissionReviewVersions:
  # NOTE(ludo): admission v1 requires github.com/slok/kubewebhook/v2
  #- v1
  - v1beta1
  clientConfig:
    service:
      name: kubesec-webhook
      namespace: kubesec
      path: "/statefulset"
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURHVENDQWdHZ0F3SUJBZ0lVSnZSUVpMSUJncjVYYTRPb1J0NmN2T2dDbWZRd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0pqRWtNQ0lHQTFVRUF3d2JhM1ZpWlhObFl5MTNaV0pvYjI5ckxtdDFZbVZ6WldNdWMzWmpNQjRYRFRJeQpNVEV4TmpFME1qTXdPVm9YRFRJek1URXhOakUwTWpNd09Wb3dKakVrTUNJR0ExVUVBd3diYTNWaVpYTmxZeTEzClpXSm9iMjlyTG10MVltVnpaV011YzNaak1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0MKQVFFQTQ2L0xjMEFiREMzejdhTFFySE9CZjI1UzdzUVArRnFOUFpYNFBjdWZnd0g4ZDhKY2l0bVZpd2VHOXp2VApQM1MrZ0s3TnNVdXZ1bGNEY3Zndm5EZVF6dkhYZmd0V09ZQVRlSlU2ZkJTNXBscDMxK2wwcG5uYnZ0UFlla2J2CmU2cW1sME9ybWppcm13UVZkWXIrWWxwWWJOSmJmNHh5a0FRTEhEczRGSVlHQXRIV0hpNU0rZFJwTGFWallrbG4KclVMak1GdW80eXdkWGhpNGd2V1lhSlcyRE01ZGxuVzdXZzFRR2huZ1paZ2ZEQW1OT0NhYnM2WEFnalhxUVVQMgp0UlZHck94T0hPZTFFREdjYkY5MDk0dmYrR3E2d0pqU1lpRXBBckwyRlBYeFNjTm0wYVdRNzZqd0Vna2JQaWtSCnhXVXRmbXBIYlIrUnFSSm8xckJqREZaZSt3SURBUUFCb3o4d1BUQW1CZ05WSFJFRUh6QWRnaHRyZFdKbGMyVmoKTFhkbFltaHZiMnN1YTNWaVpYTmxZeTV6ZG1Nd0V3WURWUjBsQkF3d0NnWUlLd1lCQlFVSEF3RXdEUVlKS29aSQpodmNOQVFFTEJRQURnZ0VCQU1pclNEb2FDeUVWYk5UZE9FRW0rVEFadEF4bGlBR1FBaUhDUU5QT0o5WDgwTTVKCkJ6MDBLUDkvaWN3SHcrdEg1aU1MRDk2ZDh1aFZFbllGN2l6NUpYYkZFTnlyY3EvYUJiRWFlVWxSMFltMlpSMEQKL1pHMUtLU3E3WmJrclJRQTAwb2FaLzJBeUdCbWdleklRNk0yU3F5TmRoR1VVdngxVVBYbTlxN1AvWGJQZU1HRApiVFd5alhmc1NlelY0MFFGZFArL09JN3h3WmFVd0lGYWU4S3p5TjdkL1I3byt1WTdzbFE3L3pvWVdmbHpod0VvCnJtYnBVUmJ4SGQwaTNzYndlbWlqc1ZZbDQzYko3MWdvQUhVSlkzNGdEeis2eVRMdU5zaFVsV1haZUhoRzgrSjYKNzhpb01WcTdDU3F4a3lVM0VZc09ydmxCeTdOeHlsYTM3NDZYSWhrPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  failurePolicy: Fail
  namespaceSelector:
    matchLabels:
      kubesec-validation: enabled
  name: statefulset.admission.kubesec.io
  rules:
    - operations:
      - CREATE
      - UPDATE
      apiGroups:
      - apps
      apiVersions:
      - "*"
      resources:
      - statefulsets
  sideEffects: None

---
apiVersion: admissionregistration.k8s.io/v1beta1
kind: MutatingWebhookConfiguration
metadata:
  name: kubesec-webhook
  labels:
    app: kubesec-webhook
    kind: validator
webhooks:
  - name: deployment.admission.kubesc.io
    clientConfig:
      service:
        name: kubesec-webhook
        namespace: kubesec
        path: "/deployment"
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURHVENDQWdHZ0F3SUJBZ0lVVUZ6a0xUdXUwTFY1VHFESlBmcTlJVmdocU9rd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0pqRWtNQ0lHQTFVRUF3d2JhM1ZpWlhObFl5MTNaV0pvYjI5ckxtdDFZbVZ6WldNdWMzWmpNQjRYRFRJeApNREV5TnpJd016VTFNVm9YRFRJeU1ERXlOekl3TXpVMU1Wb3dKakVrTUNJR0ExVUVBd3diYTNWaVpYTmxZeTEzClpXSm9iMjlyTG10MVltVnpaV011YzNaak1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0MKQVFFQXh5VzlXS1BjTlJ4My9iZ0U3STF6MjNCS1VKZEQ4N3FEQ2FackhEbU8zMXQ1OWJ5b0JIeS9NbHhmRHl1awpEUlVHajBaTTZzV01EYU1LWTNzMitldUxML1V0aVU1Uk9Pb1BjOGZ3TkVRNjg3c1FqRmtic1ozT0FCL0xNUGFGCk1MZ3NaeXhUUnpBVHk3UlVsNnBhckNaY0lrdmwxWlRNQk9kU3p4V0hpS1dPQjFiZlI4ZGY0V0srRmtoVWV3VGYKVmd5Y3I1ODlMdVRXODVDL2NQYS9lSFFsaTh5OFlsVE9tRTkyMFplcEpjeTdqUTV5V0xRc09hUzhueFg0bmd2ZgpzQXhrNkZ5TlVWTnNoSmFRWUs0dzBKUkV4eFdNWnF3U3lUbm40dnA3QlFTUXdDZGxVdGtWNnA3eVFZcS8xdHNXClNxcVZGNmdXN1hlS3IrTFB2bklpTnZDdklRSURBUUFCb3o4d1BUQW1CZ05WSFJFRUh6QWRnaHRyZFdKbGMyVmoKTFhkbFltaHZiMnN1YTNWaVpYTmxZeTV6ZG1Nd0V3WURWUjBsQkF3d0NnWUlLd1lCQlFVSEF3RXdEUVlKS29aSQpodmNOQVFFTEJRQURnZ0VCQUNxTVFna1lOZ0txR0pQcGJPZURxZ0hPZVptWVBPM0R6NElHWlp3VDZZaXNqQ0F3CmtRbXZRWExyNUVybklsWE1QdVFFRjNaQTJsSGFqSW00dFZ5bm45N1lmaGliQTNsMHNUVEdxMytVS2RzS3pUTDkKdDlzTmFTVFYzYVh5d2VUdW5Sei90dy9iUWFPS0NGQ1NNOTNtZnBXemVuSHMwQ1lQc0pDazVBZkprd2xoVjBJbQo4cEFQTy9wWUNUN0dXOUZrbU11YVNGcURsUnRIaFhRLzYzR0dVdFBRbU84MEZuZnl2TWk1WjdQS0Z0bW9tOTdjCm0rU09jTVRGR1hIMlczRTlCeU02VUVhd2VUV1VoL1doMU1qZ2dyYWsxdWo2RFU2OHF6SmkrOFF2QVJVWnZmQ3AKUzdJZmIyNDN3Vi8zSkZJV1MrUnpBU0pFQTFYVkVnSDJDSWU1aGc4PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    rules:
      - operations:
        - CREATE
        - UPDATE
        apiGroups:
        - apps
        - extensions
        apiVersions:
        - "*"
        resources:
        - deployments
    failurePolicy: Fail
    namespaceSelector:
      matchLabels:
        kubesec-validation: enabled
  - name: daemonset.admission.kubesc.io
    clientConfig:
      service:
        name: kubesec-webhook
        namespace: kubesec
        path: "/daemonset"
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURHVENDQWdHZ0F3SUJBZ0lVVUZ6a0xUdXUwTFY1VHFESlBmcTlJVmdocU9rd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0pqRWtNQ0lHQTFVRUF3d2JhM1ZpWlhObFl5MTNaV0pvYjI5ckxtdDFZbVZ6WldNdWMzWmpNQjRYRFRJeApNREV5TnpJd016VTFNVm9YRFRJeU1ERXlOekl3TXpVMU1Wb3dKakVrTUNJR0ExVUVBd3diYTNWaVpYTmxZeTEzClpXSm9iMjlyTG10MVltVnpaV011YzNaak1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0MKQVFFQXh5VzlXS1BjTlJ4My9iZ0U3STF6MjNCS1VKZEQ4N3FEQ2FackhEbU8zMXQ1OWJ5b0JIeS9NbHhmRHl1awpEUlVHajBaTTZzV01EYU1LWTNzMitldUxML1V0aVU1Uk9Pb1BjOGZ3TkVRNjg3c1FqRmtic1ozT0FCL0xNUGFGCk1MZ3NaeXhUUnpBVHk3UlVsNnBhckNaY0lrdmwxWlRNQk9kU3p4V0hpS1dPQjFiZlI4ZGY0V0srRmtoVWV3VGYKVmd5Y3I1ODlMdVRXODVDL2NQYS9lSFFsaTh5OFlsVE9tRTkyMFplcEpjeTdqUTV5V0xRc09hUzhueFg0bmd2ZgpzQXhrNkZ5TlVWTnNoSmFRWUs0dzBKUkV4eFdNWnF3U3lUbm40dnA3QlFTUXdDZGxVdGtWNnA3eVFZcS8xdHNXClNxcVZGNmdXN1hlS3IrTFB2bklpTnZDdklRSURBUUFCb3o4d1BUQW1CZ05WSFJFRUh6QWRnaHRyZFdKbGMyVmoKTFhkbFltaHZiMnN1YTNWaVpYTmxZeTV6ZG1Nd0V3WURWUjBsQkF3d0NnWUlLd1lCQlFVSEF3RXdEUVlKS29aSQpodmNOQVFFTEJRQURnZ0VCQUNxTVFna1lOZ0txR0pQcGJPZURxZ0hPZVptWVBPM0R6NElHWlp3VDZZaXNqQ0F3CmtRbXZRWExyNUVybklsWE1QdVFFRjNaQTJsSGFqSW00dFZ5bm45N1lmaGliQTNsMHNUVEdxMytVS2RzS3pUTDkKdDlzTmFTVFYzYVh5d2VUdW5Sei90dy9iUWFPS0NGQ1NNOTNtZnBXemVuSHMwQ1lQc0pDazVBZkprd2xoVjBJbQo4cEFQTy9wWUNUN0dXOUZrbU11YVNGcURsUnRIaFhRLzYzR0dVdFBRbU84MEZuZnl2TWk1WjdQS0Z0bW9tOTdjCm0rU09jTVRGR1hIMlczRTlCeU02VUVhd2VUV1VoL1doMU1qZ2dyYWsxdWo2RFU2OHF6SmkrOFF2QVJVWnZmQ3AKUzdJZmIyNDN3Vi8zSkZJV1MrUnpBU0pFQTFYVkVnSDJDSWU1aGc4PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    rules:
      - operations:
        - CREATE
        - UPDATE
        apiGroups:
        - apps
        - extensions
        apiVersions:
        - "*"
        resources:
        - daemonsets
    failurePolicy: Fail
    namespaceSelector:
      matchLabels:
        kubesec-validation: enabled
  - name: statefulset.admission.kubesc.io
    clientConfig:
      service:
        name: kubesec-webhook
        namespace: kubesec
        path: "/statefulset"
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURHVENDQWdHZ0F3SUJBZ0lVVUZ6a0xUdXUwTFY1VHFESlBmcTlJVmdocU9rd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0pqRWtNQ0lHQTFVRUF3d2JhM1ZpWlhObFl5MTNaV0pvYjI5ckxtdDFZbVZ6WldNdWMzWmpNQjRYRFRJeApNREV5TnpJd016VTFNVm9YRFRJeU1ERXlOekl3TXpVMU1Wb3dKakVrTUNJR0ExVUVBd3diYTNWaVpYTmxZeTEzClpXSm9iMjlyTG10MVltVnpaV011YzNaak1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0MKQVFFQXh5VzlXS1BjTlJ4My9iZ0U3STF6MjNCS1VKZEQ4N3FEQ2FackhEbU8zMXQ1OWJ5b0JIeS9NbHhmRHl1awpEUlVHajBaTTZzV01EYU1LWTNzMitldUxML1V0aVU1Uk9Pb1BjOGZ3TkVRNjg3c1FqRmtic1ozT0FCL0xNUGFGCk1MZ3NaeXhUUnpBVHk3UlVsNnBhckNaY0lrdmwxWlRNQk9kU3p4V0hpS1dPQjFiZlI4ZGY0V0srRmtoVWV3VGYKVmd5Y3I1ODlMdVRXODVDL2NQYS9lSFFsaTh5OFlsVE9tRTkyMFplcEpjeTdqUTV5V0xRc09hUzhueFg0bmd2ZgpzQXhrNkZ5TlVWTnNoSmFRWUs0dzBKUkV4eFdNWnF3U3lUbm40dnA3QlFTUXdDZGxVdGtWNnA3eVFZcS8xdHNXClNxcVZGNmdXN1hlS3IrTFB2bklpTnZDdklRSURBUUFCb3o4d1BUQW1CZ05WSFJFRUh6QWRnaHRyZFdKbGMyVmoKTFhkbFltaHZiMnN1YTNWaVpYTmxZeTV6ZG1Nd0V3WURWUjBsQkF3d0NnWUlLd1lCQlFVSEF3RXdEUVlKS29aSQpodmNOQVFFTEJRQURnZ0VCQUNxTVFna1lOZ0txR0pQcGJPZURxZ0hPZVptWVBPM0R6NElHWlp3VDZZaXNqQ0F3CmtRbXZRWExyNUVybklsWE1QdVFFRjNaQTJsSGFqSW00dFZ5bm45N1lmaGliQTNsMHNUVEdxMytVS2RzS3pUTDkKdDlzTmFTVFYzYVh5d2VUdW5Sei90dy9iUWFPS0NGQ1NNOTNtZnBXemVuSHMwQ1lQc0pDazVBZkprd2xoVjBJbQo4cEFQTy9wWUNUN0dXOUZrbU11YVNGcURsUnRIaFhRLzYzR0dVdFBRbU84MEZuZnl2TWk1WjdQS0Z0bW9tOTdjCm0rU09jTVRGR1hIMlczRTlCeU02VUVhd2VUV1VoL1doMU1qZ2dyYWsxdWo2RFU2OHF6SmkrOFF2QVJVWnZmQ3AKUzdJZmIyNDN3Vi8zSkZJV1MrUnpBU0pFQTFYVkVnSDJDSWU1aGc4PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    rules:
      - operations:
        - CREATE
        apiGroups:
        - apps
        apiVersions:
        - "*"
        resources:
        - statefulsets
    failurePolicy: Fail
    namespaceSelector:
      matchLabels:
        kubesec-validation: enabled
